# OKR Management System - Deployment Guide

## Quick Deploy to Render (Recommended)

### Step 1: Sign up for Render
1. Go to https://render.com
2. Sign up with your GitHub account (free, no credit card needed)

### Step 2: Deploy from GitHub
1. Click **"New +"** â†’ **"Blueprint"**
2. Connect your GitHub repository: `https://github.com/nwinnie450/OKR`
3. Render will automatically detect `render.yaml` and create 2 services:
   - `okr-backend` - Your Express API
   - `okr-frontend` - Your React app

### Step 3: Configure Environment Variables

#### Backend (`okr-backend`) Environment Variables:
```
MONGODB_URI=mongodb+srv://winniengiew:Orion888@okr-prod.tviahlr.mongodb.net/?retryWrites=true&w=majority&appName=OKR-PRod
NODE_ENV=production
PORT=10000
JWT_SECRET=<auto-generated by Render>
FRONTEND_URL=<will be your frontend URL from Render>
```

#### Frontend (`okr-frontend`) Environment Variables:
```
VITE_API_URL=<will be your backend URL from Render>/api
```

**Example:**
- If your backend deploys to: `https://okr-backend.onrender.com`
- Set `VITE_API_URL` to: `https://okr-backend.onrender.com/api`

### Step 4: Get Your URLs
After deployment completes (5-10 minutes):
- Backend URL: `https://okr-backend.onrender.com`
- Frontend URL: `https://okr-frontend.onrender.com`

### Step 5: Update Frontend Environment Variable
1. Go to `okr-frontend` service in Render dashboard
2. Add environment variable:
   ```
   VITE_API_URL=https://okr-backend.onrender.com/api
   ```
3. Click **"Save Changes"** - this will trigger a redeploy

### Step 6: Update Backend CORS
1. Go to `okr-backend` service in Render dashboard
2. Update environment variable:
   ```
   FRONTEND_URL=https://okr-frontend.onrender.com
   ```
3. Click **"Save Changes"** - this will trigger a redeploy

### Step 7: Login
Visit your frontend URL: `https://okr-frontend.onrender.com`

**Admin Credentials:**
- Email: `admin@okr.com`
- Password: `admin123`

---

## Alternative: Deploy Backend to Render, Frontend to Vercel

If you prefer to keep frontend on Vercel:

### Backend on Render:
Follow steps 1-3 above, but only for the backend service.

### Frontend on Vercel:
1. Go to https://vercel.com
2. Import your GitHub repository
3. Add environment variable in Vercel dashboard:
   ```
   VITE_API_URL=https://okr-backend.onrender.com/api
   ```
4. Deploy

---

## Important Notes

### Free Tier Limitations
- Render free tier services spin down after 15 minutes of inactivity
- First request after inactivity may take 30-60 seconds (cold start)
- This is normal for free tier

### Production Recommendations
For production use with no downtime:
- Upgrade to Render's **Starter plan** ($7/month per service)
- Or use a paid hosting service

---

## Troubleshooting

### "Cannot connect to server"
- Check that `VITE_API_URL` is set correctly in frontend
- Check that backend service is running in Render dashboard
- Wait for cold start if backend was sleeping

### "CORS error"
- Make sure `FRONTEND_URL` is set correctly in backend
- Must include `https://` protocol
- No trailing slash

### "Admin login not working"
- Run the admin creation script:
  ```bash
  node -e "require('dotenv').config({ path: '.env.production' }); require('./scripts/createAdmin.js')"
  ```

---

## Manual Deployment Commands

If you prefer manual deployment:

### Build Frontend Locally
```bash
npm install
npm run build
# dist/ folder contains the built frontend
```

### Run Backend Locally
```bash
cd server
npm install
node src/server.js
```
